PHP: функция по анализу директории

Задача: *Сделать универсальную функцию по чтению и анализу директории и файлов, с обязательным тестом. *Функция должна принимать один параметр - путь до папки. *Результат работы функции должен быть массив директорий и файлов, содержащий анализ элементов.

Пример вызова: $result = getDirectoryStatus("./test/"); // папка test находится на одном уровне с вызываемой файле

Решение задачи предпологает следующие пункты:

Тест (с тестовой структурой) и функция в отдельных файлах.
Входные данные для функции передаются в аргументах.
Функция возвращает результат в формате массива.
Сохранение и выгрузка в репозиторий.
Публикация ссылки на файл с решением в комментарии к задаче.